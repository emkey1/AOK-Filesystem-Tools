#!/bin/sh
# Fake bangpath to trick linters and editors
#
#  Part of https://github.com/emkey1/AOK-Filesystem-Tools
#
#  License: MIT
#
#  Copyright (c) 2023: Jacob.Lundqvist@gmail.com
#
# /etc/profile: system-wide .profile file for the Bourne shell (sh(1))
# and Bourne compatible shells (bash(1), ksh(1), ash(1), ...).

#
#  Don't know why but without this delay, profile occationally fails
#  to complete under iSH, leaving just a blank screen. Just a guess,
#  but could be that the Launch cmd (triggering /etc/profile) is run
#  before the OS is ready?
#
sleep 2

if [ "$(id -u)" -eq 0 ]; then
    PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
else
    PATH="/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games"
fi
export PATH

if [ -n "${PS1-}" ]; then
    if [ -n "${BASH-}" ] && [ "$BASH" != "/bin/sh" ]; then
        # The file bash.bashrc already sets the default PS1.
        # PS1='\h:\w\$ '
        if [ -f /etc/bash.bashrc ]; then
            #  shellcheck disable=SC1091
            . /etc/bash.bashrc
        fi
    else
        if [ "$(id -u)" -eq 0 ]; then
            PS1='# '
        else
            PS1='$ '
        fi
    fi
fi

if [ -d /etc/profile.d ]; then
    for i in /etc/profile.d/*.sh; do
        if [ -r "$i" ]; then
            #  shellcheck disable=SC1090
            . "$i"
        fi
    done
    unset i
fi

# Be sure to set the locale
# export LANG=en_US.UTF-8
